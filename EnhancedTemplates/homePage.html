{% extends "base.html" %}

{% block title %}INDEX{% endblock %}

{% block content %}

<h1>HOME PAGE</h1>

{% if current_user.is_authenticated %}
  <div class="home-welcome">
    <h3>WELCOME {{ current_user.username | upper }} - YOU ARE LOGGED IN</h3>
  </div>
{% else %}
  <div class="home-welcome">
    <h3>WELCOME TO TASKS APP â€” SIGN UP OR LOGIN BELOW!</h3>
  </div>
{% endif %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for message in messages %}
      <div id="flashed-message">{{ message|safe }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="home-links">
  {% if current_user.is_authenticated %}
    <a href="{{ url_for('displayTasks', username=current_user.username) }}">Display Tasks</a>
  {% else %}
    <a href="{{ url_for('signup') }}">Sign Up</a>
    <a href="{{ url_for('login') }}">Login</a>
  {% endif %}

  {% if current_user.username == 'Aryan' %}
    <a href="{{ url_for('secret') }}">Secret</a>
  {% endif %}

  {% if current_user.is_authenticated %}
    <a href="{{ url_for('logout') }}">Logout</a>
  {% endif %}
</div>

{% if current_user.username == 'Aryan' %}
  <br><br>
  <h2>All Users (Admin View)</h2>
  <div class="home-links">
    {% for user in users %}
      <div>
        UID: {{ user.uid }}, USERNAME: {{ user.username }}, PASSWORD: {{ user.password }}
        <form action="{{ url_for('deleteUser', uid=user.uid) }}" method="POST">
          <button type="submit">Delete User</button>
        </form>
      </div>
      <br>
    {% endfor %}
  </div>
{% endif %}

{% endblock %}
